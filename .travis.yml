language: python

python:
    - "3.6"
    - "3.7"
    - "3.8"
install:
    - pip install -r requirements.txt
    - pip install -r requirements-test.txt
script:
    - mypy
    - flake8
    - black --check --diff --fast .
    - xenon --max-absolute A --max-modules A --max-average A .
deploy:
    - provider: pypi
      distributions: sdist
      server: https://test.pypi.org/legacy/
      user: seto-r
      password:
          secure: "K+DfjB8A2sIvpJtWWKbzrOBQlNQDcajIOFqw3TMmfdDQOSdUhjldXjtoY0Y3+84EB2vqVtSKF6BgYdpcsFmHDaIy03Idt5ajesFfxU8lcXseHk5iE+wTkmNtIxvb3bFuRTfXajSv3BpMG3GCUVXGC7lD2BaO0fU9xogRXdKqZaK0Ea+JFPv0GweTLhu4m9oK/I0P6x0JP/M5bCLltX/6bf8wAN6suioixWwRhHrFcsu1kq8XXGNM5muyVKQ/WZeVCMItoWH4MAzWjyIz7hJNdb0jx3hKhJ3MXSysalToqtTjmXnwgc57XGpopwkdh+RI6L34iM7AQ5moB4XnwrROWoDKQYYGSwGA9vOaQO7FzJg2JvSVbOHAL4VB8LrycdB+R36YOf1l8LrBSSeSbjjWBdJgjyaoUve6JfAB4uflhg7j1hAqKVjz/ZBKzV5UjASei7C6iyHRkxg6EH0dc3vbd3EO7I/uI479hF5XQfWL3N2lwI1G8K7lPzJ1EtNmhXJe6d+TvciZtFvJpIKL5h9I8WQuMz5yg2QopKVjLLjjc0TjR9Uomz8NKv7r00aEZoeCCu0U+wX7+3NVgv6uVjKQ2PeQ3pnoo8zjbmhnSV+uIG6TKRtPyHh3NRaSsi342S1pkfeKRCTSdgza9En1pvV+Odrdt8+rOmYKadtQNegGoAo="
      on:
          branch: master
          tags: false
          condition: $TRAVIS_PYTHON_VERSION = "3.8"
