language: python

python:
    - "3.6"
    - "3.7"
    - "3.8"
install:
    - pip install -r requirements.txt
    - pip install -r requirements-test.txt
script:
    - mypy
    - flake8
    - black --check --diff --fast .
    - xenon --max-absolute A --max-modules A --max-average A .
deploy:
    - provider: pypi
      distributions: sdist
      server: https://test.pypi.org/legacy/
      user: seto-r
      password:
          secure: WDUjiU7LIxBfYCcyRVms1kMoLyiFwSfrvyKfLoz1cE+FRK7Cvw+bBOuPTOSl9UQb7cZt0Bhx+R/Bz2lhwDY0gf+aLzm0DrDH/e0i4KQDDZnPn5ez8kc4TaXbVoGlNBOLvMMQa7jJUtVKwHhf7ILYxbWmgWs7Gxdcc57x8V279WMKoRLMsEe57y0x5zKAHciFAE2fCS99cw3BpNLYM9Vcr4ekPeuzWq9ntjtRTB5yfCqKMn9C67b3hYod2vMIpzG4QDIGWlkzXDJVyMGuVEs+v96SeUcxo/Dw4U6RO1AhPDTPFprm4Cdc5zLMQ0ySQl6jINsKBEko1kKpVXighI3qWF7aVpv2sBv3V8r2lAjcNAeX3zWXoBxb67le9O9XDxMLDCccFvgAohL9oV3trvku7fnQeX4SPhFbAss4bTRxqifZxiaBcK8/rBgbRiQ4WBA5vFlBgDV5UFIn0B9X0OjgpKENlvYj5wpS6kNyaeITL/ShbA3Cxc0E3bYyzzACBqj3/U4qpHpqkQD0Ugjo7dW7J0HErLqyJ5nz1Xet6qrAaFKHyV2CWs1F30QyWxDkgVag+ChCOkNj+B8pW1bZigiWZkxZrF5VAfnZi/pDOOnm4l+5YEo1CWuS6ZZN/pPMiUxG3mGR9hnjc6ccGxQESpnNRdo461gZPByFEX/F73rZ8Bg=
      on:
          branch: master
          tags: false
          condition: $TRAVIS_PYTHON_VERSION = "3.8"
